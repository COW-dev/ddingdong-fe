#!/bin/sh

if ! command -v npx >/dev/null 2>&1; then
  echo "❌ npx 를 찾을 수 없습니다. Node/npm PATH를 확인해주세요."
  exit 1
fi

npx --no -- commitlint --edit "$1" || {
  echo ""
  echo "❌ 커밋 메시지 형식이 올바르지 않습니다."
  echo ""
  echo "📝 올바른 형식: <type>: <subject>"
  echo ""
  echo "✅ 사용 가능한 타입:"
  echo "   - feat: 새로운 기능 추가"
  echo "   - fix: 버그 수정"
  echo "   - hotfix: 긴급 버그 수정"
  echo "   - docs: 문서 변경"
  echo "   - style: 코드 포맷팅 (기능 변경 없음)"
  echo "   - refactor: 리팩토링"
  echo "   - test: 테스트 추가/수정"
  echo "   - chore: 빌드/설정 변경"
  echo "   - build: 빌드 시스템 변경"
  echo "   - ci: CI 설정 변경"
  echo "   - revert: 이전 커밋 되돌리기"
  echo ""
  echo "💡 예시:"
  echo "   ✓ feat: 사용자 로그인 기능 추가"
  echo "   ✓ fix: 로그인 버그 수정"
  echo "   ✓ docs: README 업데이트"
  echo ""
  exit 1
}
